<html>
	<head>
		<title>Address Conversion Utility</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
		<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
		<script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.js'></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="../js/utilities.js"></script>
		<script type="text/javascript">
			function convertAddress(){
				var address = $("#streetAddress").val();
				var geographicLocation = getAddressConversion(address);
				$("#latitude").val(geographicLocation.latitude);
				$("#longitude").val(geographicLocation.longitude);
			}
			
			function GeographicLocation(){
				this.latitude = "";
				this.longitude = "";
			}
			
			function GeographicLocation(lat, lng){
				this.latitude = lat;
				this.longitude = lng;
			}
			
			function getAddressConversion(addressString){
				var address = replaceAll(' ', '+', addressString);
				var apiKey = "AIzaSyAQeBBy5gncPrgeyZCJdTx6zmo2n6t3faA";
				var url = "https://maps.googleapis.com/maps/api/geocode/xml?address=" + address + "&key=" + apiKey;
				console.log(url);
				var eke = new GeographicLocation();
				$.ajax({
					dataType: "xml",
					url: url,
					async: false,
					data: "",
					success: function (data){
						eke.latitude = $(data).find("location>lat").text();
						eke.longitude = $(data).find("location>lng").text();
					}
				});
				return eke;
			}
		</script>
	</head>
	<body>
		<table>
			<tr>
				<td>Enter Street Address:</td>
				<td><input type = 'text' id = 'streetAddress' /></td>
			</tr>
			<tr>
				<td><input type = 'text' disabled = 'true' id = 'latitude' /></td>
				<td><input type = 'text' disabled = 'true' id = 'longitude' /></td>
			</tr>
			<tr>
				<td><button type = 'button' onclick = 'convertAddress()'>Convert to Lat/Long</button></td>
				<td></td>
			</tr>
		</table>
	</body>
</html>