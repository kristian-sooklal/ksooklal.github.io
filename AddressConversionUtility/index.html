<html>
	<head>
		<title>Address Conversion Utility</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
		<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
		<script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.js'></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="../js/appConversion.js"></script>
		<script type="text/javascript">
			function executeAddressConversion(address){
				return encodeAddress(address);
			}
			
			function encodeAddress(address){
				executeAddressConversion(address);
				var latitude = getLatitude();
				var longitude = getLongitude();
				if (longitude === undefined || typeof(longitude) === undefined || typeof(latitude) === undefined || latitude === undefined){
					return null;
				}
				var location = "" + latitude + ", " + longitude;
				return locations;
			}	
			
			function replaceAll(find, replace, str) {
				return str.replace(new RegExp(find, 'g'), replace);
			}

			function encodeAddresses(addresses){
				var locations = [];
				addresses.forEach(function(entry){
					executeAddressConversion(entry);
				});
				var latitude = getLatitude();
				var longitude = getLongitude();
				if (longitude === undefined || typeof(longitude) === undefined || typeof(latitude) === undefined || latitude === undefined){
					return null;
				}
				locations.push("" + latitude + ", " + longitude);
				return locations;
			}
			
			function getJSON(addressString){
				var address = replaceAll(' ', '+', addressString);
				var apiKey = "AIzaSyAQeBBy5gncPrgeyZCJdTx6zmo2n6t3faA";
				var url = "https://maps.googleapis.com/maps/api/geocode/xml?address=" + address + "&key=" + apiKey;
				console.log(url);
				var eke = "";
				$.ajax({
					dataType: "xml",
					url: url,
					async: false,
					data: "",
					success: function (data){
						eke = $(data).find("location>lat").text();
					}
				});
				return eke;
			}
		</script>
	</head>
	<body>
		<table>
			<tr>
				<td>Enter Street Address:</td>
				<td><input type = 'text' id = 'streetAddress' /></td>
			</tr>
			<tr>
				<td><input type = 'text' disabled = 'true' id = 'latitude' /></td>
				<td><input type = 'text' disabled = 'true' id = 'longitude' /></td>
			</tr>
			<tr>
				<td><button type = 'button' onclick = 'encodeAddress()'>Convert to Lat/Long</button></td>
				<td></td>
			</tr>
		</table>
	</body>
</html>