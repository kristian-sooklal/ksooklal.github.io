<html>
	<head>
		<title>C.O.D. Parking Map</title>
		<link href="../images/Google Maps Icon.ico" rel="shortcut icon">
		<style>
			html, body, #map-canvas {
				height: 100%;
				margin: 0px;
				padding: 0px
			}
			html, body, #map-canvas {
				height: 100%;
				margin: 0px;
				padding: 0px
			}
		</style>
		<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
		<script type="text/javascript" src="../js/mapUtilities.js"></script>
		<script type="text/javascript" src="../js/parkingLocations.js"></script>
		<script type="text/javascript">
			var infowindow;
			(function () {
				google.maps.Map.prototype.markers = new Array();
				
				google.maps.Map.prototype.addMarker = function(marker) {
					this.markers[this.markers.length] = marker;
				};
				
				google.maps.Map.prototype.getMarkers = function() {
					return this.markers
				};
				
				google.maps.Map.prototype.clearMarkers = function() {
					if(infowindow) {
						infowindow.close();
					}
				
					for(var i=0; i<this.markers.length; i++){
						this.markers[i].set_map(null);
					}
				};
			})();
			
			

			function initialize() {
				var myOptions = {
					zoom: 16,
					center: new google.maps.LatLng(38.902, -77.01),
					mapTypeId: google.maps.MapTypeId.ROADMAP
					//mapTypeId: google.maps.MapTypeId.SATELLITE
				};
				
				map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

				var locations = getLocations();
				for (var i = 0; i < locations.length; i++) {
					var latlng = new google.maps.LatLng(locations[i].latitude, locations[i].longitude);
					console.log(locations[i].longitude);
					console.log(locations[i].latitude);
					map.addMarker(createMarker(locations[i].locationName, latlng));
				 }
			}

			function createMarker(name, latlng) {
				var marker = new google.maps.Marker(
					{
						position: latlng, 
						map: map
					}
				);
				google.maps.event.addListener(marker, "click", function() {
					if (infowindow) 
						infowindow.close();
					infowindow = new google.maps.InfoWindow({content: name});
					infowindow.open(map, marker);
				});
				return marker;
			}
		</script>
	</head>
	<body onload="initialize()">
		<div id = 'header' style = 'width: 100%'><h2 align = 'center'>C.O.D. Parking Map</h2></div>
		<div id = "map_canvas" style = "min-width: 200px; width: 100%; min-height:200px; height:90%; "></div>
		<a href="http://stackoverflow.com/questions/1544739/google-maps-api-v3-how-to-remove-all-markers/1544885#1544885"></a>
	</body>
</html>
