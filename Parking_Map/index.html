<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
		<meta charset="utf-8">
		<title>C.O.D. Parking Map</title>
		<style>
			html, body, #map-canvas {
				height: 100%;
				margin: 0px;
				padding: 0px
			}
		</style>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
		<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
		<script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.js'></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script>
			var globalLat = "";
			var globalLong = "";
			
			function decodeAddress(address){
				new google.maps.Geocoder().geocode({'address': address}, 
					function (results, status){
						var latitude = results[0].geometry.location.lat();
						var longitude = results[0].geometry.location.lng();
						document.getElementById("lat").value = latitude;
						document.getElementById("long").value = longitude;
					}
				);
			}
			
			var callback = function (lat, lng){
				globalLat = lat;
				globalLong = lng;
			}
			
			function decode(callback, address){
				new google.maps.Geocoder().geocode({'address': address}, 
					function (results, status){
						var latitude = results[0].geometry.location.lat();
						var longitude = results[0].geometry.location.lng();
						callback(latitude, longitude);
					}
				);
			}
			
			function translateCODAddress(){
				console.debug( document.getElementById("lat").value + "\t" + 
						document.getElementById("long").value);
			
			};
	
			function initialize() {
				var CODAddress = "820 1st Street NE Washington DC 20002";
				decode(callback, CODAddress);
				
				var mapOptions = {
					zoom: 12,
					center: new google.maps.LatLng(38.9007471, -77.00649629999998)
				}
				
				var coordinates = 	[
										["COD", 38.9007471, -77.00649629999998, 1]
									];
				var addresses = 	[
										["COD", "820 First Street NE Washington DC 20002"]
									];
				var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
				setMarkers(map, coordinates);
			}

			var priorityIndex = 1;

			function setMarkers(map, locations) {
				// Add markers to the map

				// Marker sizes are expressed as a Size of X,Y
				// where the origin of the image (0,0) is located
				// in the top left of the image.

				// Origins, anchor positions and coordinates of the marker
				// increase in the X direction to the right and in
				// the Y direction down.
			  
				var pinColor = "FE7569";
				var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor,
					new google.maps.Size(21, 34),
					new google.maps.Point(0,0),
					new google.maps.Point(10, 34)
				);
				for (var i = 0; i < locations.length; i++) {
					var beach = locations[i];
					var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
					alert(myLatLng);
					var marker = new google.maps.Marker({
						position: myLatLng,
						map: map,
						icon: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png',
						title: beach[0],
						zIndex: beach[3]
					});
				}
			}

			google.maps.event.addDomListener(window, 'load', initialize);
		</script>
	</head>
	<body>
			<div style="width: 80%; max-height:90%" id="map-canvas"></div>
			<input id = 'lat' value="" />
			<input id = 'long' value = ""/>
</form> 
	</body>
</html>