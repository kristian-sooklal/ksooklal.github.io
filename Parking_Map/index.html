<html>
	<head>
		<title>C.O.D. Parking Map</title>
		<style>
			html, body, #map-canvas {
				height: 100%;
				margin: 0px;
				padding: 0px
			}
			html, body, #map-canvas {
				height: 100%;
				margin: 0px;
				padding: 0px
			}
		</style>
		<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
		<script type="text/javascript">
			var infowindow;
			(function () {
				google.maps.Map.prototype.markers = new Array();
				
				google.maps.Map.prototype.addMarker = function(marker) {
					this.markers[this.markers.length] = marker;
				};
				
				google.maps.Map.prototype.getMarkers = function() {
					return this.markers
				};
				
				google.maps.Map.prototype.clearMarkers = function() {
					if(infowindow) {
						infowindow.close();
					}
				
					for(var i=0; i<this.markers.length; i++){
						this.markers[i].set_map(null);
					}
				};
			})();
			
			function ParkingDescription(){
				this.zoneRestriction = 0;
				this.streetCleaning = false;
				this.cost = 0;
				this.garage = false;
			}
		
			function ParkingDescription(zoneRestriction, streetCleaning, cost, garage){
				this.cost = cost;
				this.streetCleaning = streetCleaning;
				this.garage = false;
				this.zoneRestriction = zoneRestriction;
			}
		
			function Location(locationName, locationType, latitude, longitude, locationAddress, zIndex, parkingDescription) {
				this.locationName = locationName;
				this.locationType = locationType;
				this.latitude = latitude;
				this.longitude = longitude;
				this.locationAddress = locationAddress;
				this.zIndex = zIndex;
				this.parkingDescription = parkingDescription;
			}
			
			function Location(locationName, locationType, latitude, longitude, locationAddress){
				this.parkingDescription = null;
				this.zIndex = 1;
				this.latitude = latitude;
				this.locationType = locationType;
				this.locationAddress = locationAddress;
				this.locationName = locationName;
				this.longitude = longitude;
			}
			
			function getLocations(){
				var locations = [];
				locations.push(new Location("COD", "Work", 38.9007471, -77.00649629999998, "820 First Street NE Washington DC 20002"));
				locations.push(new Location("Kristian", "Home", 38.9931229, -77.0234289, "820 First Street NE Washington DC 20002"));
				return locations;
			}

			function initialize() {
				var myOptions = {
					zoom: 12,
					center: new google.maps.LatLng(38.9007471, -77.00649629999998),
					mapTypeId: google.maps.MapTypeId.ROADMAP
					//mapTypeId: google.maps.MapTypeId.SATELLITE
				};
				
				map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

				var locations = getLocations();
				for (var i = 0; i < locations.length; i++) {
					var latlng = new google.maps.LatLng(locations[i].latitude, locations[i].longitude);
					console.log(locations[i].longitude);
					console.log(locations[i].latitude);
					map.addMarker(createMarker(locations[i].locationName, latlng));
				 }
			}

			function createMarker(name, latlng) {
				var marker = new google.maps.Marker(
					{
						position: latlng, 
						map: map
					}
				);
				google.maps.event.addListener(marker, "click", function() {
					if (infowindow) 
						infowindow.close();
					infowindow = new google.maps.InfoWindow({content: name});
					infowindow.open(map, marker);
				});
				return marker;
			}
		</script>
	</head>
	<body onload="initialize()">
		<div id="map_canvas" style="width:50%; height:80%;float:left;"></div>
		<br style="clear: both;"/>
		<button onclick="map.clearMarkers();">clear</button><br />
		<a href="http://stackoverflow.com/questions/1544739/google-maps-api-v3-how-to-remove-all-markers/1544885#1544885"></a>
	</body>
</html>
